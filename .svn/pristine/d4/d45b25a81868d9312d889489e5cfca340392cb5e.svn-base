(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-559ecfa9","chunk-2d0b93c9"],{"05cf":function(e,t){e.exports="data:image/png;base64,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"},"0ad8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{"label-width":"120px"}},[r("div",[r("el-row",{attrs:{gutter:20}},e._l(e.teachers,(function(t,i){return r("el-col",{key:t.id,attrs:{span:8}},[r("el-card",{staticClass:"box-card teacher_card"},[r("div",{staticClass:"inline-block"},[t.icon?r("img",{staticStyle:{width:"50px",display:"inline-block",height:"40px"},attrs:{src:e.processImgUrl(t.icon)}}):e._e(),t.icon?e._e():r("img",{staticStyle:{wwidth:"50px",display:"inline-block",height:"40px"},attrs:{src:a("e3ef9")}})]),r("div",{staticClass:"inline-block"},[r("span",{staticClass:"teacher_name"},[e._v(e._s(t.teachername))]),r("el-checkbox",{staticClass:"teacher_checkbox",on:{change:e.checkedShow},nativeOn:{click:function(a){return e.handleClick(t)}},model:{value:t.isShow,callback:function(a){e.$set(t,"isShow",a)},expression:"item.isShow"}}),r("span",[e._v("显示")]),r("span",{staticClass:"el-icon-close delete_teacher",on:{click:function(a){return e.deleteTeacher(t)}}})],1)])],1)})),1)],1),r("el-select",{staticStyle:{width:"235px"},attrs:{filterable:"",placeholder:"输入讲师名称/下拉框选择","value-key":"id","no-match-text":"无此讲师"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.teacher,(function(e){return r("el-option",{key:e.id,attrs:{label:e.teachername,value:e}})})),1),r("el-button",{staticStyle:{"vertical-align":"top","margin-left":"3px"},on:{click:function(t){return e.chooseTeacher(e.value)}}},[e._v("添加")])],1),r("div",{staticClass:"dialog-footer text-left",staticStyle:{"margin-top":"20px"}},[r("el-button",{on:{click:function(t){return e.$router.push("/coursePage/index")}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v("确认")])],1)],1)},i=[],o=(a("ed63"),a("8cf2"),a("6d57"),a("6724")),n=a("555e"),s={directives:{waves:o["a"]},props:["courseid"],data:function(){return{teacher:[],value:"",teachers:[],form:{},listLoading:!0,listQuery:{pageIndex:0,currentPage:1,pageSize:1e5}}},mounted:function(){},created:function(){var e=this;Object(n["t"])({courseId:this.courseid}).then((function(t){t.data&&t.data.length&&t.data.length&&t.data.forEach((function(t){1==t.show?t.isShow=!0:t.isShow=!1,e.teachers.push({teacherId:t.id,teachername:t.teachername,isShow:t.isShow,icon:t.icon})}))})),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,this.listQuery.pageIndex=this.listQuery.currentPage-1,Object(n["n"])(this.listQuery).then((function(t){e.teacher=t.data.data,e.total=t.data.totalCount,e.listLoading=!1}))},updateData:function(){var e=this,t=[];this.teachers.length&&this.teachers.forEach((function(e){e.isShow?e.show="1":e.show="0",t.push({teacherId:e.teacherId,show:e.show})}));var a={courseId:this.courseid,teachers:t};Object(n["k"])(a).then((function(t){0==t.code&&e.$message.success("提交成功")}))},checkedShow:function(e){},handleClick:function(e){e.isShow||this.teachers.length&&this.teachers.forEach((function(e){e.isShow=!1}))},chooseTeacher:function(e){if(e){var t=this.teachers.map((function(e){return e.teacherId})),a=!0;this.teachers.length&&this.teachers.forEach((function(e){e.isShow&&(a=!1)})),t.includes(e.id)?this.$message.error("该讲师已添加"):this.teachers.push({teacherId:e.id,teachername:e.teachername,isShow:a,icon:e.icon})}else this.$message.error("请选择讲师")},deleteTeacher:function(e){this.teachers.splice(this.teachers.indexOf(e),1)}}},c=s,l=(a("4236"),a("9ca4")),u=Object(l["a"])(c,r,i,!1,null,"0e694040",null);t["default"]=u.exports},"0aff":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"图片裁剪",visible:e.dialog,"append-to-body":"",width:e.imgWidth+50+"px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t}}},[a("div",{staticClass:"cropper-content"},[a("div",{staticClass:"cropper",staticStyle:{margin:"0 auto"},style:{height:e.imgHeight+10+"px",width:e.imgWidth+10+"px"}},[a("vueCropper",{ref:"cropper",attrs:{img:e.imgUrl,"output-size":e.option.size,"output-type":e.option.outputType,info:!0,full:e.option.full,"can-move":e.option.canMove,"can-move-box":e.option.canMoveBox,original:e.option.original,"auto-crop":e.option.autoCrop,fixed:e.option.fixed,"fixed-number":e.option.fixedNumber,"center-box":e.option.centerBox,"info-true":e.option.infoTrue,"fixed-box":e.option.fixedBox,"auto-crop-width":e.autoCropWidth,"auto-crop-height":e.autoCropHeight}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cropImage("cancel")}}},[e._v("取消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:function(t){return e.cropImage()}}},[e._v("确认")])],1)])],1)},i=[],o=(a("9a33"),a("555e")),n={props:["imgUrl","autoCropWidth","autoCropHeight","imgWidth","imgHeight","imgFile"],data:function(){return{cropImg:"",imageUrl:"",dialog:!1,loading:!1,option:{img:"",info:!0,outputSize:1,outputType:"jpeg",canScale:!0,autoCrop:!0,fixedBox:!0,fixed:!1,full:!1,canMoveBox:!0,original:!1,centerBox:!1,infoTrue:!1}}},methods:{realTime:function(e){this.previews=e},getBase64:function(e,t){var a=new FileReader,r=21e5;e=e;e&&(a.readAsDataURL(e),a.onload=function(e){if(0!=r&&r<a.result.length)alert("上传失败，请上传不大于2M的图片！");else{var i=a.result;t(i)}})},cropImage:function(e){var t=this,a=this;e?a.dialog=!1:(this.$refs.cropper.getCropData((function(e){t.cropImg=e})),this.loading=!0,Object(o["w"])().then((function(e){var r=t.cropImg.split(",")[1]+"",i="https://upload.qiniup.com/putb64/-1",o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState){var t=JSON.parse(o.response);a.imageUrl=e.data.qiniuDomain+t.key,a.dialog=!1,a.loading=!1,a.$emit("imgUrl",a.imageUrl)}},o.open("POST",i,!0),o.setRequestHeader("Content-Type","application/octet-stream"),o.setRequestHeader("Authorization","UpToken ".concat(e.data.token)),o.send(r)})))}}},s=n,c=(a("4959"),a("9ca4")),l=Object(c["a"])(s,r,i,!1,null,"c2c4f6de",null);t["default"]=l.exports},"0bef":function(e,t,a){},"0f8f":function(e,t,a){},1:function(e,t){},"16c7":function(e,t,a){"use strict";var r=a("b2eb"),i=a.n(r);i.a},"16d9":function(e,t,a){},1792:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"operate-panel"},[a("div",{staticClass:"operate-panel_left"},[a("el-button",{attrs:{type:"default"},on:{click:function(t){return e.addNode("",1)}}},[e._v("+添加章")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){return e.addNode("",2)}}},[e._v("+添加节")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){return e.addNode("",3)}}},[e._v("+添加内容")])],1)]),a("el-tree",{attrs:{data:e.data,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent}}),e.dialogNodeVisible?a("el-dialog",{attrs:{title:e.dialogText,visible:e.dialogNodeVisible,width:"40%","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogNodeVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[1==e.form.chaptertype?[a("el-form-item",{attrs:{label:"章标题",prop:"chaptername",rules:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"最多可输入50个字符",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.chaptername,callback:function(t){e.$set(e.form,"chaptername",t)},expression:"form.chaptername"}})],1)]:e._e(),2==e.form.chaptertype?[a("el-form-item",{attrs:{label:"节标题",prop:"chaptername",rules:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"最多可输入50个字符",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.chaptername,callback:function(t){e.$set(e.form,"chaptername",t)},expression:"form.chaptername"}})],1)]:e._e(),3==e.form.chaptertype?[a("el-form-item",{attrs:{label:"选择教学形式",prop:"coursewaretype",rules:[{required:!0,message:"选择教学形式",trigger:"change"}]}},[a("el-radio",{attrs:{label:"1"},on:{change:function(t){return e.checkType(1)}},model:{value:e.form.coursewaretype,callback:function(t){e.$set(e.form,"coursewaretype",t)},expression:"form.coursewaretype"}},[e._v("视频")]),a("el-radio",{attrs:{label:"3"},on:{change:function(t){return e.checkType(3)}},model:{value:e.form.coursewaretype,callback:function(t){e.$set(e.form,"coursewaretype",t)},expression:"form.coursewaretype"}},[e._v("音频")]),a("el-radio",{attrs:{label:"2"},on:{change:function(t){return e.checkType(2)}},model:{value:e.form.coursewaretype,callback:function(t){e.$set(e.form,"coursewaretype",t)},expression:"form.coursewaretype"}},[e._v("PDF")]),a("el-radio",{attrs:{label:"4"},on:{change:function(t){return e.checkType(4)}},model:{value:e.form.coursewaretype,callback:function(t){e.$set(e.form,"coursewaretype",t)},expression:"form.coursewaretype"}},[e._v("网页")])],1),a("el-card",{staticClass:"box-card"},[a("el-form-item",{attrs:{label:"标题",prop:"chaptername",rules:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"最多可输入50个字符",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.chaptername,callback:function(t){e.$set(e.form,"chaptername",t)},expression:"form.chaptername"}})],1),"4"!==e.form.coursewaretype?a("el-form-item",{attrs:{label:e.labelText,required:""}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:e.baseUrl,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,"on-remove":e.handleRemove,"http-request":e.upqiniu,limit:1,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[1==e.form.coursewaretype?a("span",[e._v("只能上传.mp4文件")]):e._e(),3==e.form.coursewaretype?a("span",[e._v("只能上传.mp3文件")]):e._e(),2==e.form.coursewaretype?a("span",[e._v("只能上传.pdf文件")]):e._e()]),e.erroMessage?a("div",{staticClass:".el-upload__tip tip_erroMessage",attrs:{slot:"tip"},slot:"tip"},[a("span",[e._v("请上传文件")])]):e._e()])],1):e._e(),e.form.coursewareurl&&2==e.form.coursewaretype?a("div",[a("div",{staticClass:"pdf"},[a("p",{staticClass:"arrow"},[a("pdf",{directives:[{name:"show",rawName:"v-show",value:e.showPdf,expression:"showPdf"}],attrs:{src:e.form.coursewareurl,page:e.currentPage},on:{"num-pages":function(t){e.pageCount=t},"page-loaded":function(t){e.currentPage=t},loaded:e.loadPdfHandler}})],1)])]):e._e(),"4"==e.form.coursewaretype?[a("el-form-item",{attrs:{label:"链接",required:""}},[a("el-input",{attrs:{oninput:"value=value.replace(/[^a-zA-Z0-9&=%#.:/]/g,'')"},on:{input:function(t){return e.$forceUpdate()}},model:{value:e.form.coursewareurl,callback:function(t){e.$set(e.form,"coursewareurl",t)},expression:"form.coursewareurl"}})],1),e.erroMessage?a("div",{staticStyle:{color:"#ff4949","font-size":"12px","line-height":"1","margin-left":"120px","margin-top":"-13px","margin-bottom":"5px"}},[e._v(" 链接 ")]):e._e()]:e._e(),"4"!==e.form.coursewaretype?[a("el-form-item",{attrs:{label:"长度"}},[a("el-input",{staticStyle:{width:"calc(100% - 50px)"},attrs:{readonly:""},model:{value:e.form.chapterlength,callback:function(t){e.$set(e.form,"chapterlength",t)},expression:"form.chapterlength"}}),2==e.form.coursewaretype?a("span",{staticStyle:{"margin-left":"15px"}},[e._v("页")]):e._e(),1==e.form.coursewaretype||3==e.form.coursewaretype?a("span",{staticStyle:{"margin-left":"15px"}},[e._v("秒")]):e._e()],1)]:e._e(),"4"==e.form.coursewaretype?[a("el-form-item",{attrs:{label:"长度",prop:"chapterlength"}},[a("el-input",{staticStyle:{width:"calc(100% - 174px)"},attrs:{oninput:"value=value.replace(/[^\\d]/g,'')"},on:{input:function(t){return e.$forceUpdate()}},model:{value:e.form.chapterlength,callback:function(t){e.$set(e.form,"chapterlength",t)},expression:"form.chapterlength"}}),a("el-select",{staticStyle:{display:"inline-block",width:"120px","margin-left":"15px"},attrs:{placeholder:"请选择-单位","value-key":"type"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.unitList,(function(e){return a("el-option",{key:e.type,attrs:{value:e.type,label:e.name}})})),1)],1),e.erroMessage?a("div",{staticStyle:{color:"#ff4949","font-size":"12px","line-height":"1","margin-left":"120px","margin-top":"-13px","margin-bottom":"5px"}},[!e.form.chapterlength&&e.form.unit?a("span",[e._v("请输入长度")]):e._e(),!e.form.unit&&e.form.chapterlength?a("span",[e._v("请选择单位")]):e._e(),e.form.unit||e.form.chapterlength?e._e():a("span",[e._v("请输入长度")])]):e._e()]:e._e()],2)]:e._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogNodeVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.loading||e.fileLoading},on:{click:function(t){return e.updateData()}}},[e._v("确认")])],1)],1):e._e()],1)])},i=[],o=(a("cc57"),a("9a33"),a("555e")),n=a("6a90"),s=a("6724"),c={components:{pdf:n["a"]},directives:{waves:s["a"]},props:["courseid"],data:function(){return{data:[],defaultProps:{children:"nodes",label:"chaptername"},progressPercent:0,showPdf:!1,fileLoading:!1,loading:!1,fileList:[],dialogNodeVisible:!1,baseUrl:"https://upload.qiniup.com",dialogText:"",form:{chaptertype:1},labelText:"",currentPage:0,pageCount:0,erroMessage:!1,unitList:[{type:1,name:"页"},{type:2,name:"秒"}]}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;Object(o["s"])({courseId:this.courseid}).then((function(t){e.data=JSON.parse(JSON.stringify(t.data))}))},renderContent:function(e,t){var a=this,r=t.node,i=t.data;t.store;return 1==i.chaptertype?e("span",{style:"flex: 1;display: flex;align-items: center;justify-content: space-between;padding-right: 8px;"},[e("span",[r.label]),e("span",[e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.addNode(i,2)}}},["添加节"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.addNode(i,3)}}},["添加内容"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.edit(i)}}},["编辑"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.remove(i)}}},["删除"])])]):2==i.chaptertype?e("span",{style:"flex: 1;display: flex;align-items: center;justify-content: space-between;padding-right: 8px;"},[e("span",[r.label]),e("span",[e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.addNode(i,3)}}},["添加内容"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.edit(i)}}},["编辑"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.remove(i)}}},["删除"])])]):e("span",{style:"flex: 1;display: flex;align-items: center;justify-content: space-between;padding-right: 8px;"},[e("span",[r.label]),e("span",[e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.edit(i)}}},["编辑"]),e("el-link",{attrs:{type:"primary"},on:{click:function(){return a.remove(i)}}},["删除"])])])},addNode:function(e,t){this.dialogNodeVisible=!0,this.dialogText="创建",this.erroMessage=!1,this.form=e?{parentid:e.id,chaptername:"",courseid:this.courseid,chaptertype:t}:{chaptertype:t,chaptername:""},3==t&&(this.form.coursewaretype="1",this.labelText="上传视频",this.fileLoading=!1,this.fileList=[],this.form.coursewareurl="",this.form.chapterlength="")},edit:function(e){this.fileLoading=!1,this.dialogNodeVisible=!0,this.erroMessage=!1,this.dialogText="编辑",this.form=Object.assign({},e),this.form.coursewareurl&&(this.form.coursewaretype=this.form.coursewaretype+"",this.fileList=[{url:this.form.coursewareurl,name:this.form.coursewarename}])},append:function(e){var t={id:id++,chaptername:"testtest",nodes:[]};e.nodes||this.$set(e,"nodes",[]),e.nodes.push(t)},checkType:function(e){this.fileLoading=!1,this.fileList=[],this.form.chapterlength="",this.form.coursewareurl="",this.form.unit="",1==e?this.labelText="上传视频":3==e?this.labelText="上传音频":2==e&&(this.labelText="上传PDF文件"),this.$forceUpdate()},upqiniu:function(e){var t=this;this.form.chapterlength="";var a={headers:{"Content-Type":"multipart/form-data"}},r=this;Object(o["w"])().then((function(i){if(0==i.code){var o=new FormData;o.append("file",e.file),o.append("token",i.data.token),t.erroMessage=!1,console.log(r.$axios.CancelToken.source),r.source=r.$axios.CancelToken.source(),r.$axios({url:r.baseUrl,method:"post",data:o,config:a,onUploadProgress:function(t){var a=t.loaded/t.total*100|0;e.onProgress({percent:a})},cancelToken:r.source.token}).then((function(t){e.onSuccess(),r.imageUrl=i.data.qiniuDomain+t.data.key;var a=e;a.name=e.file.name.split(".")[0],a.url=r.imageUrl,r.handleAvatarSuccess(a)}))}}))},handleAvatarSuccess:function(e){this.fileList.push({name:e.name,url:e.url,courseid:this.courseid}),this.form.coursewarename=e.name,this.form.coursewareurl=e.url,this.erroMessage=!1},handleRemove:function(e,t){this.fileList=[],e.raw&&(e.raw.remove=!0),this.form.coursewareurl="",this.form.chapterlength="",this.erroMessage=!0,this.source.cancel("取消上传")},handleExceed:function(){this.$message.error("上传最多只能上传一个文件!")},beforeAvatarUpload:function(e){var t=e.name||"",a=t.split(".")[t.split(".").length-1],r=this;if("1"==this.form.coursewaretype){if("mp4"!==a)return this.$message.error("上传文件只能是 mp4 格式!"),!1;var i=URL.createObjectURL(e),o=new Audio(i);o.addEventListener("loadedmetadata",(function(e){n=o.duration,n=parseInt(n),r.form.chapterlength=n}))}else if("3"==this.form.coursewaretype){if("mp3"!==a)return this.$message.error("上传文件只能是 mp3 格式!"),!1;var n;i=URL.createObjectURL(e),o=new Audio(i);o.addEventListener("loadedmetadata",(function(e){n=o.duration,n=parseInt(n),r.form.chapterlength=n}))}else if("2"==this.form.coursewaretype&&"pdf"!==a)return this.$message.error("上传文件只能是 pdf 格式!"),!1},remove:function(e,t){var a=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["a"])(e.id).then((function(e){0==e.code?(a.$notify({title:"Success",message:"删除成功!",type:"success",duration:2e3}),a.getData()):a.$message.error(e.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},updateData:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;""!=e.form.coursewareurl&&""!=e.form.chapterlength?(e.form.courseid=e.courseid,e.loading=!0,Object(o["f"])(e.form).then((function(t){0==t.code?(e.$message.success("提交成功"),e.dialogNodeVisible=!1,e.getData()):e.$message.error(t.msg),e.loading=!1}))):e.erroMessage=!0}))},changePdfPage:function(e){0===e&&this.currentPage>1&&this.currentPage--,1===e&&this.currentPage<this.pageCount&&this.currentPage++},loadPdfHandler:function(e){this.currentPage=1,this.form.chapterlength=this.pageCount,this.$set(this.form,"chapterlength",this.pageCount),this.$forceUpdate()}}},l=c,u=(a("16c7"),a("9ca4")),d=Object(u["a"])(l,r,i,!1,null,"65b8c81a",null);t["default"]=d.exports},2:function(e,t){},"2e3f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{staticClass:"app-container"},[r("el-page-header",{attrs:{content:"课程管理",title:"返回"},on:{back:function(t){return e.$router.push("/coursePage/index")}}}),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[e.coverimg?r("el-image",{staticClass:"inline_block",staticStyle:{width:"164px",height:"90px","object-fit":"contain"},attrs:{src:e.processImgUrl(e.coverimg),"preview-src-list":e.coverimg.split(",")}}):e._e(),e.coverimg?e._e():r("img",{staticClass:"inline_block",staticStyle:{width:"100px",height:"80px"},attrs:{src:a("05cf"),alt:""}}),r("div",{staticClass:"font-level-3 inline_block",staticStyle:{"margin-left":"50px"}},[r("strong",[e._v(" "+e._s(e.form.coursename))])]),e.form.type?r("el-tag",{staticStyle:{"margin-left":"15px"},attrs:{type:"success"}},[e._v(" "+e._s(1==e.form.type?"私有":2==e.form.type?"半公开":"公开"))]):e._e(),r("div",{staticClass:"dialog-footer text-right inline_block  pull-right",staticStyle:{"line-height":"80px"}})],1),r("el-col",{staticClass:"tac",staticStyle:{height:"calc(100% - 180px)"}},[r("el-col",{staticStyle:{"margin-top":"15px",height:"calc(100% - 25px)",overflow:"auto"},attrs:{span:5}},[r("ul",{staticClass:"el-menu-vertical-demo el-menu",attrs:{role:"menubar"}},e._l(e.tabArray,(function(t,a){return r("li",{key:a,staticClass:"el-submenu text-center",attrs:{role:"menuitem"},on:{click:function(t){return e.changeMenu(a)}}},[r("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"}},[r("span",{class:{tab_active:e.activeMenu==a}},[e._v(e._s(t))])])])})),0)]),r("el-col",{staticStyle:{"margin-top":"15px",height:"calc(100% - 25px)"},attrs:{span:19}},[r("el-card",{staticClass:"box-card",staticStyle:{height:"100%","overflow-y":"auto"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.tabArray[e.activeMenu]))])]),0==e.activeMenu?r("div",[r("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"标题",prop:"coursename"}},[r("el-input",{staticStyle:{width:"400px"},model:{value:e.form.coursename,callback:function(t){e.$set(e.form,"coursename",t)},expression:"form.coursename"}})],1),r("el-form-item",{attrs:{label:"分类",prop:"classname"}},[r("div",{staticClass:"pro-sty"},[r("el-input",{attrs:{placeholder:"请选择分类",clearable:"","read-only":""},on:{change:e.changeTree},nativeOn:{click:function(t){return e.deptogglePanel(t,"classTree",e.selClassTree)}},model:{value:e.form.classnamePath,callback:function(t){e.$set(e.form,"classnamePath",t)},expression:"form.classnamePath"}}),e.showTree?r("div",{ref:"suoShuMenTree",staticClass:"treeDiv"},[r("el-tree",{ref:"classTree",staticClass:"suoshubumen",attrs:{data:e.nodes,props:e.defaultProps,"node-key":"id","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1):e._e()],1)]),r("el-form-item",{attrs:{label:"封面",prop:"coverimg"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.baseUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"auto-upload":!1,"on-change":e.uploadFileMethodAnswer}},[e.form.coverimg?r("img",{staticClass:"avatar",attrs:{src:e.processImgUrl(e.form.coverimg)}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e.form.coverimg?r("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute","z-index":"8",right:"10px","font-size":"16px"},on:{click:function(t){return e.removeImg(t)}}}):e._e(),r("div",{staticClass:"el-upload__tip",staticStyle:{color:"red","margin-top":"0"},attrs:{slot:"tip"},slot:"tip"},[e._v(" 建议尺寸472px*258px ")])])],1),r("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:5},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),r("div",{staticClass:"dialog-footer",staticStyle:{"margin-left":"120px"}},[r("el-button",{on:{click:function(t){return e.$router.push("/coursePage/index")}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v("确认")])],1)],1):e._e(),1==e.activeMenu?r("div",[r("Chapter",{attrs:{courseid:e.info.id,type:e.form.type}})],1):e._e(),2==e.activeMenu?r("div",[r("Student",{attrs:{courseid:e.info.id,type:e.form.type},on:{changeType:e.changeType}})],1):e._e(),3==e.activeMenu?r("div",[r("Material",{attrs:{courseid:e.info.id}})],1):e._e(),4==e.activeMenu?r("div",[r("Lecturer",{attrs:{courseid:e.info.id}})],1):e._e()])],1)],1)],1),r("Crop",{ref:"dialogCropVisible",attrs:{"img-url":e.optionImg,"auto-crop-height":258,"auto-crop-width":472,"img-height":e.imgHeight,"img-width":e.imgWidth,"img-file":e.imgFile},on:{imgUrl:e.getUrl}})],1)},i=[],o=(a("309f"),a("0b53"),a("06a2"),a("ec25"),a("cc57"),a("2b45"),a("b449"),a("6648")),n=(a("6d57"),a("6724")),s=a("555e"),c=a("1792"),l=a("e452"),u=a("0ad8"),d=a("497d"),p=a("0aff");function h(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function f(e,t){if(e){if("string"===typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var g=a("31a6").Base64,v={components:{Chapter:c["default"],Material:l["default"],Lecturer:u["default"],Student:d["default"],Crop:p["default"]},directives:{waves:n["a"]},data:function(){return{form:{coverimg:""},nodes:[],defaultProps:{children:"nodes",label:"classname"},rules:{coursename:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"最多可输入50个字符",trigger:"blur"}],introduction:[{max:500,message:"最多可输入500个字符",trigger:"blur"}],classname:[{required:!0,message:"请选择分类",trigger:"change"}],coverimg:[{required:!0,message:"请上传封面",trigger:"change"}]},tabArray:["基本信息","章节设置","学员管理","课程资料","讲师设置"],baseUrl:"/ovu-base/uploadImg",activeMenu:"0",showTree:!1,selClassTree:{},loading:!1,obj:{},imgWidth:0,imgHeight:0,optionImg:"",imgFile:{},classid:""}},computed:{info:{get:function(){return this.$route.query.info?JSON.parse(g.decode(this.$route.query.info)):{}},set:function(e){this.form=e}}},mounted:function(){},created:function(){var e=this;this.obj=JSON.parse(JSON.stringify(this.info));var t={coursename:this.info.coursename,pageIndex:0,currentPage:1,pageSize:100},a=this;Object(s["o"])(t).then((function(t){var r=t.data.data;r.length&&r.forEach((function(t){t.id==a.info.id&&(a.$set(a,"obj",t),a.$set(a.form,"classid",t.classid),e.getDataTree())}))})),this.coverimg=this.$route.query.coverimg},methods:{handleAvatarSuccess:function(e,t){var a=this;this.form.coverimg=e.urls,this.$nextTick((function(){a.$set(a.form,"coverimg",e.urls)})),this.$forceUpdate()},uploadFileMethodAnswer:function(e){var t=this,a="image/jpeg"===e.raw.type||"image/png"===e.raw.type;if(!a)return this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),!1;this.imgFile=e;var r=new Image;r.src=URL.createObjectURL(e.raw);var i=this;r.onload=function(e){this.width-0>472?this.width<=1e3?(i.imgWidth=this.width,i.imgHeight=this.height):(i.imgWidth=1e3,i.imgHeight=1e3/this.width*this.height):(i.imgWidth=472,i.imgHeight=this.height),this.height-0<258&&(i.imgHeight=258)},this.$nextTick((function(){t.optionImg=URL.createObjectURL(e.raw);var a=t.$refs.dialogCropVisible;a.dialog=!0}))},getUrl:function(e){this.form.coverimg=e,this.$set(this.form,"coverimg",e),this.$forceUpdate()},removeImg:function(e){e.stopPropagation(),this.form.coverimg="",this.$set(this.form,"coverimg",""),this.$forceUpdate()},changeType:function(e){this.form.type=e;var t={coursename:this.info.coursename,pageIndex:0,currentPage:1,pageSize:100},a=this;Object(s["o"])(t).then((function(e){var t=e.data.data;t.length&&t.forEach((function(e){e.id==a.info.id&&a.$set(a,"obj",e)}))})),this.$forceUpdate()},updateData:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;var a=Object.assign({coverimg:e.form.coverimg},e.form);e.loading=!0,Object(s["h"])(a).then((function(t){0==t.code?(e.$message.success("提交成功"),e.$set(e,"coverimg",t.data.coverimg),e.$set(e,"obj",t.data),e.$set(e,"form",t.data),e.$set(e,"classid",t.data.classid),e.getDataTree(),e.$forceUpdate(),e.$nextTick((function(){e.$refs["form"].clearValidate()}))):e.$message.error(t.msg),e.loading=!1}))}))},changeMenu:function(e){this.activeMenu=e,this.getDataTree()},getMenuName:function(e){var t,a=h(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.id==this.form.classid?this.handleNodeClick(r):r.nodes&&this.getMenuName(r.nodes)}}catch(i){a.e(i)}finally{a.f()}},getDataTree:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.form=Object.assign({},this.obj),this.form.coverimg=this.coverimg,e.prev=2,this.loading=!0,e.next=6,Object(s["u"])().then((function(e){t.nodes=e.data,t.nodes&&t.nodes.length&&t.form.classid&&t.getMenuName(t.nodes)}));case 6:return e.prev=6,this.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[2,,6,9]])})));function t(){return e.apply(this,arguments)}return t}(),handleNodeClick:function(e){"0"!=e.parentid?(this.form.classnamePath=e.parentName+" > "+e.classname,this.selClassTree={id:e.id,classname:e.classname},this.showTree=!1,this.form.classid=e.id,this.$set(this.form,"classid",e.id),this.$set(this.form,"classname",e.classname)):this.$message.error("只允许选择叶子节点")},changeTree:function(){this.form.className="",this.form.classid=""},deptogglePanel:function(e,t,a){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.showTree?this.dephide(t,a):this.depshow(t,a)},depshow:function(e,t){var a=this;this.showTree=!0,this.$nextTick((function(){a.$refs[e].setCurrentKey(t.id)})),document.addEventListener("click",this.dephidePanel,!1)},dephide:function(){this.showTree=!1,document.addEventListener("click",this.dephidePanel,!1)},dephidePanel:function(e){this.$refs.suoShuMenTree&&!this.$refs.suoShuMenTree.contains(e.target)&&this.dephide()}}},y=v,b=(a("af63"),a("9ca4")),x=Object(b["a"])(y,r,i,!1,null,"b400d862",null);t["default"]=x.exports},3:function(e,t){},"31a6":function(e,t,a){(function(a){var r,i;(function(t,a){e.exports=a(t)})("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof a?a:this,(function(a){"use strict";a=a||{};var o,n=a.Base64,s="2.6.2",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},a=0,r=e.length;a<r;a++)t[e.charAt(a)]=a;return t}(c),u=String.fromCharCode,d=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(e){return e.replace(p,d)},f=function(e){var t=[0,2,1][e.length%3],a=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[c.charAt(a>>>18),c.charAt(a>>>12&63),t>=2?"=":c.charAt(a>>>6&63),t>=1?"=":c.charAt(63&a)];return r.join("")},m=a.btoa&&"function"==typeof a.btoa?function(e){return a.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},g=function(e){return m(h(String(e)))},v=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},y=function(e,t){return t?v(g(e)):g(e)},b=function(e){return y(e,!0)};a.Uint8Array&&(o=function(e,t){for(var a="",r=0,i=e.length;r<i;r+=3){var o=e[r],n=e[r+1],s=e[r+2],l=o<<16|n<<8|s;a+=c.charAt(l>>>18)+c.charAt(l>>>12&63)+("undefined"!=typeof n?c.charAt(l>>>6&63):"=")+("undefined"!=typeof s?c.charAt(63&l):"=")}return t?v(a):a});var x,w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,C=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return u(55296+(a>>>10))+u(56320+(1023&a));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},k=function(e){return e.replace(w,C)},S=function(e){var t=e.length,a=t%4,r=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),i=[u(r>>>16),u(r>>>8&255),u(255&r)];return i.length-=[0,0,2,1][a],i.join("")},L=a.atob&&"function"==typeof a.atob?function(e){return a.atob(e)}:function(e){return e.replace(/\S{1,4}/g,S)},_=function(e){return L(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},O=function(e){return k(L(e))},q=function(e){return O(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};a.Uint8Array&&(x=function(e){return Uint8Array.from(_(e),(function(e){return e.charCodeAt(0)}))});var P=function(){var e=a.Base64;return a.Base64=n,e};if(a.Base64={VERSION:s,atob:_,btoa:m,fromBase64:q,toBase64:y,utob:h,encode:y,encodeURI:b,btou:k,decode:q,noConflict:P,fromUint8Array:o,toUint8Array:x},"function"===typeof Object.defineProperty){var Q=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",Q((function(){return q(this)}))),Object.defineProperty(String.prototype,"toBase64",Q((function(e){return y(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",Q((function(){return y(this,!0)})))}}return a["Meteor"]&&(Base64=a.Base64),e.exports?e.exports.Base64=a.Base64:(r=[],i=function(){return a.Base64}.apply(t,r),void 0===i||(e.exports=i)),{Base64:a.Base64}}))}).call(this,a("9edd"))},"333d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],o=(a("163d"),a("09f4")),n={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&Object(o["a"])(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(o["a"])(0,800)}}},s=n,c=(a("a648"),a("9ca4")),l=Object(c["a"])(s,r,i,!1,null,"d8e2954c",null);t["a"]=l.exports},4:function(e,t){},4236:function(e,t,a){"use strict";var r=a("61e1"),i=a.n(r);i.a},4959:function(e,t,a){"use strict";var r=a("f50c"),i=a.n(r);i.a},"497d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticStyle:{height:"100%"}},[a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"operate-panel"},[a("div",{staticClass:"operate-panel_left"},[a("el-form",{ref:"form",attrs:{"label-width":"78px"}},[a("el-form-item",{staticStyle:{"marign-top":"4px"},attrs:{label:"课程类型",required:""}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 私有课程：上传后可指定所在的多个组织架构以及以下，或者指定组织内可看;"),a("br"),e._v(" 半公开课程：上传后可指定所在的多个公司组织根节点以及多个公司;"),a("br"),e._v(" 公开课程：全平台可看 ")]),a("span",{staticClass:"el-icon-question"})]),a("el-radio-group",{attrs:{required:""},model:{value:e.typeCopy,callback:function(t){e.typeCopy=t},expression:"typeCopy"}},[a("el-radio",{attrs:{label:1,disabled:null!==e.type}},[e._v("私有课程")]),a("el-radio",{attrs:{label:2,disabled:null!==e.type}},[e._v("半公开课程")]),a("el-radio",{attrs:{label:3,disabled:null!==e.type}},[e._v("公开课程")])],1),3!==e.typeCopy?a("el-input",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"学员姓名"},model:{value:e.listQuery.organizationName,callback:function(t){e.$set(e.listQuery,"organizationName",t)},expression:"listQuery.organizationName"}}):e._e(),3!==e.typeCopy?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]):e._e(),3!==e.typeCopy?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"default"},on:{click:e.resetQuery}},[e._v("重置")]):e._e()],1)],1)],1),a("div",{staticClass:"operate-panel_right",staticStyle:{"margin-top":"-23px"}},[3!==e.typeCopy?a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增学员")]):e._e(),3!==e.typeCopy?a("el-button",{attrs:{type:"primary"},on:{click:e.handleImport}},[e._v("导入学员")]):e._e()],1)]),1==e.typeCopy||2==e.typeCopy?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%",height:"calc(100% - 128px)"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"id",order:"descending"}}},[a("el-table-column",{attrs:{label:"NO",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s((e.listQuery.currentPage-1)*e.listQuery.pageSize+t.$index+1)+" ")])]}}],null,!1,1937816306)}),a("el-table-column",{attrs:{label:"学员姓名",prop:"organizationName",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"组织架构",prop:"depName",align:"left"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-link",{staticStyle:{padding:"0 3px"},attrs:{type:"primary",underline:!1},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])]}}],null,!1,715777425)})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0&&3!==e.typeCopy,expression:"total > 0 && typeCopy !== 3"}],staticClass:"panel-page"},[a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}})],1)],1),e.dialogFormVisible?a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"70%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticStyle:{height:"600px","overflow-y":"auto","overflow-x":"hidden"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:2==e.typeCopy,expression:"typeCopy == 2"}],staticClass:"filter-item",staticStyle:{width:"240px","margin-right":"5px"},attrs:{placeholder:"公司名称"},model:{value:e.companyQuery.companyName,callback:function(t){e.$set(e.companyQuery,"companyName",t)},expression:"companyQuery.companyName"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.typeCopy,expression:"typeCopy == 2"},{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.handFilter}},[e._v("查询")]),2==e.typeCopy?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading1,expression:"treeLoading1"}],key:e.treeKey,ref:"tree",staticStyle:{"margin-top":"15px"},attrs:{props:e.props,data:e.companyList,"highlight-current":"","show-checkbox":"","node-key":"id"},on:{"check-change":e.handleNodeChange}}):e._e(),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.total1>0&&2==e.typeCopy,expression:"total1 > 0 && typeCopy == 2"}],staticClass:"panel-page"},[a("pagination",{attrs:{total:e.total1,page:e.companyQuery.currentPage,limit:e.companyQuery.pageSize},on:{"update:page":function(t){return e.$set(e.companyQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.companyQuery,"pageSize",t)},pagination:e.getCompany}})],1)]),1==e.typeCopy?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree1",attrs:{data:e.orgTree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps},on:{check:e.handleNodeCheck}}):e._e()],1),a("el-col",{attrs:{span:12}},[a("el-table",{ref:"personTab",staticStyle:{width:"100%"},attrs:{data:e.personList,"row-key":e.getRowKey},on:{"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange,select:e.triggerSelect,"select-all":e.triggerAllSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}],null,!1,1895023226)}),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),2!==e.typeCopy?a("el-table-column",{attrs:{prop:"jobCode",label:"工号"}}):e._e(),2!==e.typeCopy?a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total2,expression:"total2"}],staticClass:"panel-page"},[a("pagination",{attrs:{total:e.total2,page:e.personQuery.currentPage,limit:e.personQuery.pageSize},on:{"update:page":function(t){return e.$set(e.personQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.personQuery,"pageSize",t)},pagination:function(t){return e.getPerson(e.selectObj)}}})],1),a("div",{staticStyle:{"margin-top":"20px"}},[e._v(" 已选学员： "),a("ul",e._l(e.selectList,(function(t,r){return a("li",{key:r,staticClass:"item"},[a("span",{staticClass:"name"},[e._v(e._s(t.name))]),a("span",{staticClass:"el-icon-circle-close del",on:{click:function(a){return e.deleteItem(e.selectList,t)}}})])})),0)])],1)],1)],1),a("div",{staticClass:"dialog-footer text-right",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.updateData()}}},[e._v("确认")])],1)]):e._e(),e.dialogImportFormVisible?a("el-dialog",{attrs:{title:"导入学员",visible:e.dialogImportFormVisible,width:"40%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogImportFormVisible=t}}},[a("el-form",{ref:"newForm",attrs:{model:e.newForm,"label-width":"120px",rules:e.rules}},[a("el-form-item",{attrs:{label:"关联课程",prop:"courseid"}},[a("el-select",{attrs:{placeholder:"请选择-关联课程",filterable:"","value-key":"id"},model:{value:e.newForm.courseid,callback:function(t){e.$set(e.newForm,"courseid",t)},expression:"newForm.courseid"}},e._l(e.courseList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.coursename}})})),1)],1)],1),a("div",{staticClass:"dialog-footer text-right",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogImportFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.loadingStu},on:{click:e.importStu}},[e._v("确认")])],1)],1):e._e(),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存")])],1)},i=[],o=(a("c0c3"),a("e697"),a("ed63"),a("8cf2"),a("e204"),a("6d57"),a("f548"),a("6724")),n=a("555e"),s=a("333d"),c=a("60b8"),l={components:{Pagination:s["a"]},directives:{waves:o["a"]},filters:{filterRelationtype:function(e){switch(e){case 1:return"企业";case 2:return"部门";case 3:return"员工";case 4:return"群组"}},mobileFilter:function(e){var t=/^(.{3}).*(.{4})$/;return e.replace(t,"$1****$2")}},mixins:[c["a"]],props:["courseid","type"],data:function(){return{tableKey:0,list:[],courseList:[],total:0,total1:0,total2:0,listLoading:!0,loading:!1,typeCopy:3,strictly:!1,selectList:[],personList:[],selectObj:{},props:{label:"deptName",children:"nodes"},defaultProps:{label:"deptName",children:"nodes"},listQuery:{pageIndex:0,currentPage:1,pageSize:10,organizationName:""},newForm:{courseid:null},loadingStu:!1,formLoading:!1,dialogImportFormVisible:!1,companyQuery:{pageIndex:0,currentPage:1,pageSize:20},personQuery:{pageIndex:0,currentPage:1,pageSize:20},treeKey:"1",dialogFormVisible:!1,form:{},dialogStatus:"",orgTree:[],companyList:[],textMap:{update:"更新",create:"新增"},treeLoading:!1,treeLoading1:!1,rules:{courseid:[{required:!0,message:"请选择课程",trigger:"blur,change"}]}}},created:function(){this.getList(),this.typeCopy=this.type||3},methods:{getRowKey:function(e){return e.id},getCourse:function(){var e=this;Object(n["o"])({pageIndex:0,currentPage:1,pageSize:1e7,type:this.typeCopy}).then((function(t){e.courseList=t.data.data||[]}))},resetQuery:function(){this.listQuery={organizationName:"",pageIndex:0,currentPage:1,pageSize:10,courseid:this.courseid,courseType:this.typeCopy}},search:function(){this.listQuery.currentPage=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,this.listQuery.pageIndex=this.listQuery.currentPage-1,this.listQuery.courseid=this.courseid,this.listQuery.courseType=this.typeCopy,Object(n["l"])(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.totalCount,e.listLoading=!1}))},handFilter:function(){this.companyQuery.currentPage=1,this.companyQuery.pageSize=10,this.companyQuery.pageIndex=0,this.getCompany()},getCompany:function(){var e=this;this.companyQuery.pageIndex=this.companyQuery.currentPage-1,Object(n["q"])(this.companyQuery).then((function(t){e.treeLoading1=!1,e.companyList=t.data.data,e.total1=t.data.totalCount;var a=[],r="";e.selectList&&e.selectList.length&&(a=e.selectList.reduce((function(e,t){return e.push(t.id),e}),[])),a&&(r=a.join(",")),e.companyList&&e.companyList.length&&e.companyList.forEach((function(e){e.deptName=e.companyName})),e.treeKey=+new Date,e.$nextTick((function(){e.companyList&&e.companyList.length&&e.companyList.forEach((function(t){t.deptName=t.companyName,r&&-1!==r.indexOf(t.id)&&e.$refs.tree.setChecked(t.id,!0,!1)}))}))}))},getPerson:function(e){var t=this;this.personQuery.pageIndex=this.personQuery.currentPage-1,e.entryDeptId?this.personQuery.entryDeptId=e.entryDeptId:e.companyId&&(this.personQuery.companyId=e.companyId),Object(n["r"])(this.personQuery).then((function(e){t.personList=e.data.data,t.total2=e.data.totalCount,t.personList&&t.personList.length&&t.personList.forEach((function(e){e.relationtype=3}));var a=t.selectList.reduce((function(e,t){return e.push(t.id),e}),[]).join(",");t.personList.forEach((function(e){-1==a.indexOf(e.id)&&t.selectList.push(e)})),t.setSelection()}))},getAllLeaf:function(e){var t=[];function a(e){e.length&&e.forEach((function(e){t.push(e),e.nodes&&a(e.nodes)}))}return a(e),t},handleNodeCheck:function(e,t){this.personQuery={pageIndex:0,currentPage:1,pageSize:20},e.setChecked=!e.setChecked,e.companyName?this.selectObj={companyId:e.id}:this.selectObj={entryDeptId:e.id},this.getPerson(this.selectObj)},handleNodeChange:function(e,t,a){this.personQuery={pageIndex:0,currentPage:1,pageSize:20},e.setChecked=!e.setChecked,e.companyName?this.selectObj={companyId:e.id}:this.selectObj={entryDeptId:e.id},this.getPerson(this.selectObj)},loadNode:function(e,t){0===e.level&&t(this.companyList),e.level>=1&&this.getIndex(e,t)},getIndex:function(e,t){1==e.level&&Object(n["v"])({companyId:e.data.id}).then((function(a){a.data.length&&(e.data.nodes=a.data),t(a.data)})),e.level>1&&e.data.nodes?t(e.data.nodes):t([])},resetTemp:function(){this.selectList=[],this.personList=[]},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,1==this.typeCopy?(this.treeLoading=!0,Object(n["x"])().then((function(t){e.orgTree=[{companyName:t.data.companyName,id:t.data.id,deptName:t.data.companyName,nodes:t.data.deptList||[]}],e.treeLoading=!1}))):2==this.typeCopy&&(this.treeLoading1=!0,this.getCompany())},handleImport:function(){this.getCourse(),this.newForm={},this.dialogImportFormVisible=!0,this.loadingStu=!1},deleteItem:function(e,t){var a=e.findIndex((function(e){return e.id==t.id}));e.splice(a,1),this.setSelection(),2==this.typeCopy?this.$refs.tree.setChecked(t.id,!1,!1):this.$refs.tree1.setChecked(t.id,!1,!1)},setSelection:function(){var e=this;this.$nextTick((function(){var t=e.selectList.map((function(e){return e.id}));e.personList.forEach((function(a){-1!==t.indexOf(a.id)?e.$refs.personTab.toggleRowSelection(a,!0):e.$refs.personTab.toggleRowSelection(a,!1)}))}))},triggerAllSelect:function(e){if(e.length)this.handleSelectionChange(e);else{var t=this.personList.map((function(e){return e.id}));this.selectList=this.selectList.filter((function(e){return!t.includes(e.id)}))}},triggerSelect:function(e,t){e.find((function(e){return e.id===t.id}))||(this.selectList=this.selectList.filter((function(e){return e.id!==t.id})),this.setSelection())},handleSelectionChange:function(e){var t=this.selectList.map((function(e){return e.id})),a=e.filter((function(e){return!t.includes(e.id)}));this.selectList=this.selectList.concat(a)},handleCurrentChange:function(e){this.selected=e},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["e"])(e.id).then((function(e){t.$notify({title:"Success",message:"删除成功!",type:"success",duration:2e3}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},updateData:function(){this.loading=!0,this.dialogFormVisible=!1,this.save(!0)},save:function(e){var t=this,a=[];if(e&&this.selectList.length&&this.selectList.forEach((function(e){a.push({relationid:e.id,relationtype:e.relationtype})})),this.type&&this.type!==this.typeCopy)this.$message.error("类型不允许修改！");else{var r={courseId:this.courseid,trainees:a,courseType:this.typeCopy};this.formLoading=!0,Object(n["j"])(r).then((function(e){0==e.code?(t.$message.success("提交成功"),t.search(),t.loading=!1,t.$emit("changeType",t.typeCopy)):t.$message.error(e.msg),t.formLoading=!1}))}},importStu:function(){var e=this;this.$refs["newForm"].validate((function(t){if(!t)return!1;e.loadingStu=!0,e.dialogImportFormVisible=!1;var a={newCourseId:e.courseid,oldCourseId:e.newForm.courseid,type:e.typeCopy||e.type};Object(n["y"])(a).then((function(t){0==t.code?(e.$message.success("导入成功"),e.search(),e.$emit("changeType",e.typeCopy)):e.$message.error(t.msg),e.loadingStu=!1}))}))}}},u=l,d=(a("9c89"),a("9ca4")),p=Object(d["a"])(u,r,i,!1,null,"7491f72a",null);t["default"]=p.exports},5:function(e,t){},"555e":function(e,t,a){"use strict";a.d(t,"o",(function(){return i})),a.d(t,"p",(function(){return o})),a.d(t,"n",(function(){return n})),a.d(t,"m",(function(){return s})),a.d(t,"l",(function(){return c})),a.d(t,"q",(function(){return l})),a.d(t,"r",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return p})),a.d(t,"j",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return v})),a.d(t,"e",(function(){return y})),a.d(t,"u",(function(){return b})),a.d(t,"t",(function(){return x})),a.d(t,"v",(function(){return w})),a.d(t,"x",(function(){return C})),a.d(t,"s",(function(){return k})),a.d(t,"k",(function(){return S})),a.d(t,"g",(function(){return L})),a.d(t,"f",(function(){return _})),a.d(t,"y",(function(){return O})),a.d(t,"w",(function(){return q}));a("e10e"),a("6d57");var r=a("b775");function i(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccourse/page",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursematerial/page",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocteacher/page",method:"get",params:e})}function s(e){var t=new FormData;return Object.keys(e).forEach((function(a){t.append(a,e[a])})),Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocclass/page",method:"post",data:t})}function c(e){var t=new FormData;return Object.keys(e).forEach((function(a){t.append(a,e[a])})),Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursetrainee/page",method:"post",data:t})}function l(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/park/companyPage",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/park/staffPage",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccourse/save",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursematerial/save",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursetrainee/save",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccourse/delete/".concat(e),method:"get"})}function m(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursematerial/delete/".concat(e),method:"get"})}function g(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocclass/delete/".concat(e),method:"get"})}function v(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursechapter/delete/".concat(e),method:"get"})}function y(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursetrainee/delete/".concat(e),method:"get"})}function b(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocclass/listByTree",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocteacher/teacherList",method:"get",params:e})}function w(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/park/deptTree",method:"get"})}function C(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/park/peronalOrgTree",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursechapter/listByTree",method:"get",params:e})}function S(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccourse/relTeacher",method:"post",data:e})}function L(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/moocclass/save",method:"post",data:e})}function _(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursechapter/save",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/ovu-zuul/ovu-mooc/api/v1/mooccoursetrainee/addStudent",method:"get",params:e})}function q(e){return Object(r["a"])({url:"/ovu-base/getQiNiuToken",method:"get",query:e})}},"60b8":function(e,t,a){"use strict";var r=a("4f54"),i=(a("e10e"),a("6d57"),a("31a6").Base64);t["a"]={data:function(){return{otherHeight:210}},computed:{maxHeight:function(){return this.$store.getters["settings/getClientHeight"]-this.otherHeight}},created:function(){this.assignQuery()},methods:{assignQuery:function(){var e=this.$route.query,t={};Object.keys(e).forEach((function(a){if(e.hasOwnProperty(a)&&e[a])try{var r=JSON.parse(i.decode(e[a]));if(!r.value)return;"string"===r.type?t[a]=r.value:"number"===r.type&&(t[a]=parseFloat(r.value))}catch(o){}})),Object.assign(this.listQuery,t)},handleFilter:function(){var e=this;this.listQuery.currentPage=1;var t=this.$route,a=t.path,o=t.query,n={};Object.keys(this.listQuery).forEach((function(t){n[t]=i.encode(JSON.stringify({type:Object(r["a"])(e.listQuery[t]),value:e.listQuery[t]})),"string"===typeof e.listQuery[t]&&(e.listQuery[t]=e.listQuery[t].trim())})),this.$router.push({path:a,query:Object.assign({},o,n)}),this.getList()}}}},"61e1":function(e,t,a){},6724:function(e,t,a){"use strict";a("8d41");var r="@@wavesContext";function i(e,t){function a(a){var r=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var n=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(n.width,n.height)+"px",o.appendChild(s)),i.type){case"center":s.style.top=n.height/2-s.offsetHeight/2+"px",s.style.left=n.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-n.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-n.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=a:e[r]={removeHandle:a},a}var o={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},n=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(n)),o.install=n;t["a"]=o},"8d41":function(e,t,a){},"9c89":function(e,t,a){"use strict";var r=a("0f8f"),i=a.n(r);i.a},a648:function(e,t,a){"use strict";var r=a("b955"),i=a.n(r);i.a},af63:function(e,t,a){"use strict";var r=a("16d9"),i=a.n(r);i.a},b2eb:function(e,t,a){},b955:function(e,t,a){},cd85:function(e,t,a){"use strict";var r=a("0bef"),i=a.n(r);i.a},e3ef9:function(e,t,a){e.exports=a.p+"static/img/demo-circle.cd8a6606.png"},e452:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"operate-panel"},[a("div",{staticClass:"operate-panel_left"},[a("el-input",{staticClass:"filter-item",staticStyle:{"margin-right":"5px"},attrs:{placeholder:"名称"},model:{value:e.listQuery.materialname,callback:function(t){e.$set(e.listQuery,"materialname",t)},expression:"listQuery.materialname"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"default"},on:{click:e.resetQuery}},[e._v("重置")])],1),a("div",{staticClass:"operate-panel_right"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%",height:"calc(100% - 128px)"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"id",order:"descending"}}},[a("el-table-column",{attrs:{label:"NO",type:"index",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s((e.listQuery.currentPage-1)*e.listQuery.pageSize+t.$index+1)+" ")])]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"materialname",align:"left","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"上传人",prop:"creatorName",align:"left"}}),a("el-table-column",{attrs:{label:"上传时间",prop:"createtime",align:"left",sortable:"","show-overflow-tooltip":"","min-width":"150px"}}),a("el-table-column",{attrs:{label:"下载次数",prop:"downloadTimes",align:"left",sortable:""}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-link",{staticStyle:{padding:"0 3px"},attrs:{type:"primary",underline:!1},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticClass:"panel-page"},[a("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}})],1)],1),e.dialogFormVisible?a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"407px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:e.baseUrl,accept:"image/*,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf","on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"on-progress":e.handFilePro,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传image/*,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.pdf文件")]),e.erroMessage?a("div",{staticClass:".el-upload__tip el-form-item__error",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传文件 ")]):e._e()]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.loading||e.imgLoading},on:{click:function(t){return e.updateData()}}},[e._v("确认")])],1)],1):e._e()],1)},i=[],o=(a("cc57"),a("6d57"),a("b449"),a("6648")),n=a("6724"),s=a("555e"),c=a("333d"),l=a("60b8"),u={components:{Pagination:c["a"]},directives:{waves:n["a"]},mixins:[l["a"]],props:["courseid"],data:function(){return{tableKey:0,list:[],total:0,listLoading:!0,imgLoading:!1,loading:!1,listQuery:{materialname:"",pageIndex:0,currentPage:1,pageSize:10},dialogFormVisible:!1,fileList:[],dialogStatus:"",textMap:{update:"更新",create:"新增"},baseUrl:"/ovu-zuul/ovu-mooc/api/v1/qiniu/uploadImg",erroMessage:!1}},created:function(){this.getList()},methods:{resetQuery:function(){this.listQuery={materialname:"",pageIndex:0,currentPage:1,pageSize:10,courseid:this.courseid}},search:function(){this.listQuery.currentPage=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,this.listQuery.pageIndex=this.listQuery.currentPage-1,this.listQuery.courseid=this.courseid,Object(s["p"])(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.totalCount,e.listLoading=!1}))},resetTemp:function(){this.imgLoading=!1,this.fileList=[]},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])(e.id).then((function(e){t.$notify({title:"Success",message:"删除成功!",type:"success",duration:2e3}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handFilePro:function(){this.imgLoading=!0},handleAvatarSuccess:function(e,t){this.imgLoading=!1,this.fileList.push(t),this.erroMessage=!1},handleRemove:function(e,t){this.fileList=t},updateData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.fileList.length){e.next=3;break}return this.erroMessage=!0,e.abrupt("return");case 3:return this.loading=!0,t=[],this.fileList.forEach((function(e){t.push({materialname:e.name,materialurl:e.url,courseid:a.courseid})})),e.prev=6,e.next=9,Object(s["i"])(t).then((function(e){a.$message.success("提交成功"),a.dialogFormVisible=!1,a.getList()}));case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[6,,9,12]])})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.dialogFormVisible=!1,this.resetTemp()}}},d=u,p=(a("cd85"),a("9ca4")),h=Object(p["a"])(d,r,i,!1,null,"f2cb9582",null);t["default"]=h.exports},f50c:function(e,t,a){}}]);